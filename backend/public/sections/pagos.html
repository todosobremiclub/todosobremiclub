<section class="section-pagos">

  <!-- =========================
       HEADER
  ========================== -->
  <div class="section-header" style="display:flex; align-items:center; gap:8px; flex-wrap:wrap;">
    <h2 style="margin:0;">GestiÃ³n de Pagos</h2>

    <button id="btnPagoAdd" class="btn btn-primary">
      âž• Registrar Pago
    </button>

    <button id="btnIngresoAdd" class="btn btn-secondary">
      âž• Registrar Ingreso
    </button>
  </div>

  <!-- =========================
       FILTROS
  ========================== -->
  <div class="filters" style="margin-top:10px;">
    <input
      id="pagosSearch"
      type="text"
      placeholder="Buscar por apellido o DNI"
    />

    <select id="pagosAnioSelect"></select>

    <button id="btnRefreshPagos" class="btn btn-secondary">
      Actualizar
    </button>
  </div>

  <!-- =========================
       TABLA PAGOS SOCIOS
  ========================== -->
  <div class="table-wrapper" style="margin-top:10px;">
    <table class="socios-table">
      <thead>
        <tr>
          <th>NÂ° Socio</th>
          <th>Nombre</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody id="pagosTableBody"></tbody>
    </table>
  </div>

  <!-- =========================
       OTROS INGRESOS (NO SOCIOS)
  ========================== -->
  <div
    id="ingresosBox"
    style="
      margin-top: 18px;
      border: 1px solid var(--color-accent);
      border-radius: 12px;
      padding: 14px;
      background: #fffbeb;
    "
  >
    <div style="display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap;">
      <h3 style="margin:0;">ðŸ§¾ Otros ingresos</h3>
      <div style="font-weight:700;">
        Total aÃ±o: <span id="ingresosTotal">$ 0.00</span>
      </div>
    </div>

    <div class="muted" style="margin-top:6px;">
      Ingresos no asociados a socios (cantina, sponsors, eventos, etc.)
    </div>

    <div class="table-wrapper" style="margin-top:10px;">
      <table class="socios-table">
        <thead>
          <tr>
            <th>Fecha</th>
            <th>Tipo</th>
            <th>ObservaciÃ³n</th>
            <th>Monto</th>
          </tr>
        </thead>
        <tbody id="ingresosTableBody"></tbody>
      </table>
    </div>
  </div>

  <!-- =========================================================
       MODAL REGISTRAR PAGO (SOCIOS)
  ========================================================== -->
  <div id="modalPago" class="modal hidden">
    <div class="modal-content" style="max-width: 820px;">

      <div style="display:flex; justify-content:space-between; align-items:center;">
        <h3 style="margin:0;">Registrar Pago</h3>
        <button id="btnPagoClose" class="btn btn-secondary">âœ•</button>
      </div>

      <div style="margin-top:12px;">
        <label>Buscar socio por Apellido o DNI</label>
        <input id="modalSocioSearch" type="text" placeholder="Ej: PÃ©rez" />
        <div
          id="modalSocioList"
          style="
            max-height:240px;
            overflow:auto;
            border:1px solid #ddd;
            border-radius:8px;
            padding:8px;
            margin-top:6px;
          "
        ></div>
      </div>

      <div class="row" style="margin-top:12px; align-items:flex-start;">
        <div style="min-width:240px;">
          <label>Fecha de Pago</label>
          <input id="modalFechaPago" type="date" />
        </div>

        <div style="min-width:200px;">
          <label>AÃ±o</label>
          <div style="display:flex; gap:8px; align-items:center;">
            <button id="btnAnioPrev" class="btn btn-secondary">â€¹</button>
            <strong id="modalAnioLabel" style="font-size:18px;"></strong>
            <button id="btnAnioNext" class="btn btn-secondary">â€º</button>
          </div>
        </div>
      </div>

      <div style="margin-top:12px;">
        <label>Meses a pagar</label>
        <div
          id="mesesGrid"
          style="display:grid; grid-template-columns: repeat(4, 1fr); gap:10px;"
        ></div>
        <div class="muted" id="montoHint" style="margin-top:8px;"></div>
      </div>

      <div class="modal-actions" style="margin-top:14px;">
        <button id="btnPagoCancel" class="btn btn-secondary">Cancelar</button>
        <button id="btnPagoSave" class="btn btn-primary">Guardar Pago</button>
      </div>
    </div>
  </div>

  <!-- =========================================================
       MODAL DETALLES PAGO SOCIO
  ========================================================== -->
  <div id="modalPagoDetalles" class="modal hidden">
    <div class="modal-content" style="max-width: 820px;">

      <div style="display:flex; justify-content:space-between; align-items:center;">
        <h3 id="detTitle" style="margin:0;">Detalles de Pagos</h3>
        <button id="btnDetClose" class="btn btn-secondary">âœ•</button>
      </div>

      <div class="muted" id="detSub" style="margin-top:8px;"></div>

      <div class="table-wrapper" style="margin-top:12px;">
        <table class="socios-table">
          <thead>
            <tr>
              <th>Mes</th>
              <th>Monto</th>
              <th>Fecha de pago</th>
            </tr>
          </thead>
          <tbody id="detTableBody"></tbody>
        </table>
      </div>

      <div class="row" style="justify-content: space-between; margin-top: 10px;">
        <strong id="detTotal"></strong>
        <button id="btnDetOk" class="btn btn-primary">Aceptar</button>
      </div>
    </div>
  </div>

</section>
