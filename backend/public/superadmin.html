<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Super Admin</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 16px; }
    .row { display:flex; gap:16px; flex-wrap: wrap; }
    .card { border:1px solid #ddd; border-radius:8px; padding:16px; width: 520px; max-width: 100%; }
    input, select { width: 100%; padding: 8px; margin: 6px 0 12px; }
    button { padding: 8px 12px; cursor: pointer; }
    table { width:100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border:1px solid #ddd; padding:8px; text-align:left; vertical-align: top; }
    th { background:#f3f3f3; }
    .msg { margin-top: 10px; padding: 10px; border-radius: 6px; display:none; }
    .ok { background:#e7f7ea; border:1px solid #b6e2be; color:#1f6b2a; display:block; }
    .err { background:#fdeaea; border:1px solid #f3b6b6; color:#8a1f1f; display:block; }
    .topbar { display:flex; justify-content: space-between; align-items:center; margin-bottom: 16px; }
    .thumb { width: 46px; height: 46px; object-fit: cover; border-radius: 8px; border:1px solid #ddd; }
  </style>
</head>

<body>

<div class="topbar">
  <h2>Panel Super Admin</h2>
  <button onclick="logout()">Cerrar sesión</button>
</div>

<div class="row">

  <div class="card">
    <h3>Clubes</h3>

    <h4>Crear club</h4>
    <form id="formClub">
      <input id="club_name" placeholder="Nombre del club" required>
      <input id="club_address" placeholder="Dirección">
      <input id="club_city" placeholder="Ciudad">
      <input id="club_province" placeholder="Provincia">

      <label>Logo del club (imagen)</label>
      <input id="club_logo" type="file" accept="image/*">

      <label>Fondo del club (imagen)</label>
      <input id="club_background" type="file" accept="image/*">

      <button type="submit">Guardar club</button>
    </form>

    <div id="clubMsg" class="msg"></div>

    <table>
      <thead>
        <tr>
          <th>Logo</th>
          <th>Nombre</th>
          <th>Ciudad</th>
          <th>Provincia</th>
        </tr>
      </thead>
      <tbody id="clubs-table"></tbody>
    </table>
  </div>

  <div class="card">
    <h3>Usuarios</h3>

    <h4>Crear usuario</h4>
    <form id="formUser">
      <input id="user_full_name" placeholder="Nombre completo">
      <input id="user_email" type="email" placeholder="Email" required>
      <input id="user_password" type="password" placeholder="Contraseña inicial" required>

      <select id="user_role">
        <option value="staff">staff</option>
        <option value="admin">admin</option>
        <option value="superadmin">superadmin</option>
      </select>

      <select id="user_club_id" required>
        <option value="">Cargando clubes...</option>
      </select>

      <button type="submit">Guardar usuario</button>
    </form>

    <div id="userMsg" class="msg"></div>

    <table>
      <thead>
        <tr>
          <th>Email</th>
          <th>Roles</th>
          <th>Estado</th>
        </tr>
      </thead>
      <tbody id="users-table"></tbody>
    </table>
  </div>

</div>

<script>
  const token = localStorage.getItem('token');
  if (!token) {
    alert('Tu sesión expiró. Iniciá sesión nuevamente.');
    window.location.href = '/admin.html';
  }

  function logout() {
    localStorage.removeItem('token');
    localStorage.removeItem('activeClubId');
    window.location.href = '/admin.html';
  }
</script>

<script src="/js/clubs.js"></script>
<script src="/js/users.js"></script>

</body>
</html>